<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRO SOCCER | Arena Management System</title>
    <style>
        :root {
            --primary: #27ae60;
            --primary-dark: #1e8449;
            --secondary: #2c3e50;
            --light: #f4f7f6;
            --white: #ffffff;
            --danger: #e74c3c;
            --gray: #95a5a6;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--light); color: var(--secondary); line-height: 1.6; }

        /* Navigation */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 1rem 8%; background: var(--white); box-shadow: 0 2px 15px rgba(0,0,0,0.08);
            position: sticky; top: 0; z-index: 1000;
        }
        .logo { font-weight: 800; font-size: 1.6rem; cursor: pointer; color: var(--secondary); }
        .logo span { color: var(--primary); }
        .nav-links button { background: none; border: none; margin-left: 20px; font-weight: 600; cursor: pointer; color: var(--secondary); transition: 0.3s; }
        .nav-links button:hover { color: var(--primary); }

        /* Screens */
        .screen { display: none; padding: 40px 8%; min-height: 90vh; animation: fadeIn 0.4s ease; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* UI elements from Screenshot */
        .hero { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1556056504-5c7696c4c28d?q=80&w=1200');
            background-size: cover; background-position: center; border-radius: 40px; padding: 100px 40px; text-align: center; color: white; margin-bottom: 30px;
        }
        .hero h1 { font-size: 3.5rem; margin-bottom: 10px; }
        .hero p { font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9; }
        
        .promo-banner {
            background: var(--secondary); color: white; padding: 25px 50px; border-radius: 25px;
            display: flex; align-items: center; justify-content: space-between; margin-bottom: 50px;
        }
        .promo-tag { font-size: 2.2rem; font-weight: 900; color: var(--primary); }

        .section-title { text-align: center; margin-bottom: 40px; font-size: 2.2rem; font-weight: 700; }
        
        .home-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 60px; }
        .feature-card { background: white; padding: 40px 30px; border-radius: 30px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .feature-card img { width: 60px; margin-bottom: 20px; }
        .feature-card h3 { color: var(--primary); margin-bottom: 15px; font-size: 1.5rem; }

        /* Form & Booking */
        .auth-container { max-width: 450px; margin: 20px auto; background: var(--white); border-radius: 24px; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .auth-tabs { display: flex; background: #f0f0f0; padding: 5px; }
        .tab-btn { flex: 1; padding: 12px; border: none; cursor: pointer; font-weight: bold; border-radius: 18px; }
        .tab-btn.active { background: var(--white); color: var(--primary); }
        
        input, select { width: 100%; padding: 14px; margin: 8px 0; border: 2px solid #eee; border-radius: 12px; }
        .btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 15px; cursor: pointer; font-weight: 700; transition: 0.3s; margin-top: 10px; }
        .btn:hover { background: var(--primary-dark); transform: translateY(-2px); }

        .time-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
        .time-slot { padding: 12px; border: 2px solid #eee; border-radius: 10px; text-align: center; cursor: pointer; font-weight: 700; }
        .time-slot.booked { background: #f2f2f2; color: #ccc; cursor: not-allowed; text-decoration: line-through; }
        .time-slot.selected { background: var(--primary); color: white; border-color: var(--primary); }

        /* Admin & Database Tables */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; color: var(--gray); font-size: 0.8rem; text-transform: uppercase; }

        /* Modal Payment */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 2000; }
        .modal-content { background: white; padding: 40px; border-radius: 30px; width: 420px; text-align: center; }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="payment-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="pay-title">Konfirmasi Booking</h2>
            <div id="qris-area" style="border: 2px solid #eee; padding: 20px; border-radius: 20px; margin: 20px 0;" class="hidden">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=PROSOCCER-PAY" alt="QRIS">
                <p style="font-size: 0.8rem; margin-top: 10px;">Scan QRIS untuk menyelesaikan pembayaran.</p>
            </div>
            <div id="cash-area" style="border: 2px solid #eee; padding: 20px; border-radius: 20px; margin: 20px 0;" class="hidden">
                <p>Pembayaran <b>Cash</b> di kasir saat kedatangan.</p>
            </div>
            <div id="order-summary" style="text-align: left; background: #f9f9f9; padding: 15px; border-radius: 15px; font-size: 0.9rem; margin-bottom: 20px;"></div>
            <button class="btn" onclick="confirmFinalBooking()">Konfirmasi Pesanan</button>
        </div>
    </div>

    <nav id="navbar" class="hidden">
        <div class="logo">PRO<span>SOCCER</span></div>
        <div class="nav-links">
            <button onclick="showScreen('home')">Home</button>
            <button onclick="openBookingScreen()">Booking</button>
            <button onclick="showMyBookings()">My Booking</button>
            <button onclick="showScreen('contact')">Kontak</button>
            <button onclick="logout()" style="color: var(--danger);">Logout</button>
        </div>
    </nav>

    <div id="login-screen" class="screen active">
        <div class="auth-container">
            <div class="auth-tabs">
                <button id="tab-user" class="tab-btn active" onclick="switchAuthTab('user')">User Login</button>
                <button id="tab-admin" class="tab-btn" onclick="switchAuthTab('admin')">Admin Login</button>
            </div>
            <div id="user-login-form" class="auth-content">
                <h2>Selamat Datang</h2>
                <input type="email" id="login-email" placeholder="Email">
                <input type="password" id="login-pass" placeholder="Password">
                <button class="btn" onclick="handleLogin()">Masuk</button>
                <p style="margin-top:15px; font-size:0.8rem;">Belum punya akun? <span style="color:var(--primary); cursor:pointer; font-weight:bold;" onclick="toggleSignup(true)">Daftar</span></p>
            </div>
            <div id="user-signup-form" class="auth-content hidden">
                <h2>Daftar Akun Baru</h2>
                <input type="text" id="reg-name" placeholder="Nama Lengkap">
                <input type="email" id="reg-email" placeholder="Email">
                <input type="tel" id="reg-phone" placeholder="WhatsApp">
                <input type="password" id="reg-pass" placeholder="Password">
                <button class="btn" onclick="handleSignup()">Buat Akun</button>
                <p style="margin-top:15px; font-size:0.8rem;" onclick="toggleSignup(false)">Sudah punya akun? <span style="color:var(--primary); cursor:pointer; font-weight:bold;">Login</span></p>
            </div>
            <div id="admin-login-form" class="auth-content hidden">
                <h2>Portal Admin</h2>
                <input type="password" id="admin-pass-input" placeholder="Password Admin">
                <button class="btn" style="background: var(--secondary);" onclick="handleAdminLogin()">Masuk Admin</button>
            </div>
        </div>
    </div>

    <div id="home-screen" class="screen">
        <div class="hero">
            <h1 id="welcome-msg">Halo, Player!</h1>
            <p>Mainkan pertandingan terbaikmu di arena kelas dunia.</p>
            <button class="btn" style="width: auto; padding: 15px 40px;" onclick="openBookingScreen()">Booking Sekarang</button>
        </div>

        <div class="promo-banner">
            <div>
                <h3>PROMO WEEKEND! âš¡</h3>
                <p>Diskon 20% untuk jam malam hari.</p>
            </div>
            <div class="promo-tag">#MAINBOLA</div>
        </div>

        <h2 class="section-title">Fasilitas Unggulan</h2>
        <div class="home-grid">
            <div class="feature-card">
                <img src="https://cdn-icons-png.flaticon.com/512/628/628283.png" alt="Icon">
                <h3>Rumput FIFA</h3>
                <p>Kualitas sintetis terbaik yang meminimalisir cedera.</p>
            </div>
            <div class="feature-card">
                <img src="https://cdn-icons-png.flaticon.com/512/3100/3100828.png" alt="Icon">
                <h3>Shower Mewah</h3>
                <p>Kamar mandi bersih dengan air panas.</p>
            </div>
            <div class="feature-card">
                <img src="https://cdn-icons-png.flaticon.com/512/2734/2734039.png" alt="Icon">
                <h3>Cafe Area</h3>
                <p>Tersedia minuman dingin dan snack.</p>
            </div>
        </div>
    </div>

    <div id="booking-screen" class="screen">
        <h2 style="text-align:center; margin-bottom:30px;">Tentukan Jadwal Main</h2>
        <div style="max-width: 600px; margin: auto; background: white; padding: 40px; border-radius: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.05);">
            <label>Pilih Arena</label>
            <select id="field-select" onchange="generateTimeSlots()"></select>
            <label>Tanggal</label>
            <input type="date" id="date-select" onchange="generateTimeSlots()">
            <label style="margin-top:20px; display:block;">Pilih Jam (Beberapa jam sekaligus)</label>
            <div class="time-grid" id="time-grid"></div>
            <label>Metode Pembayaran</label>
            <select id="pay-method">
                <option value="QRIS">QRIS</option>
                <option value="Cash">Cash (Bayar di Tempat)</option>
            </select>
            <div style="margin-top:20px; padding: 20px; background: #f8f9fa; border-radius: 15px; text-align: center;">
                <h2 style="color: var(--primary);" id="total-price-info">Total: Rp 0</h2>
            </div>
            <button class="btn" style="margin-top:20px;" onclick="handlePreBooking()">Lanjutkan Pembayaran</button>
        </div>
    </div>

    <div id="my-booking-screen" class="screen">
        <h2 style="text-align:center; margin-bottom:30px;">Pesanan Saya</h2>
        <div id="my-booking-list">
            <table>
                <thead><tr><th>Arena</th><th>Tanggal</th><th>Jam</th><th>Total</th><th>Metode</th></tr></thead>
                <tbody id="my-booking-tbody"></tbody>
            </table>
        </div>
    </div>

    <div id="admin-screen" class="screen">
        <h2 style="margin-bottom:20px;">Control Panel & Database</h2>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:20px; margin-bottom:30px;">
            <div style="background:white; padding:20px; border-radius:15px;">
                <h4>Atur Harga & Arena</h4>
                <input type="number" id="admin-price-input" placeholder="Harga/Jam">
                <input type="text" id="admin-venue-input" placeholder="Nama Arena Baru">
                <button class="btn" onclick="updateAdminConfig()">Simpan Config</button>
            </div>
            <div style="background:white; padding:20px; border-radius:15px;">
                <h4>Jam Operasional</h4>
                <label style="font-size:0.8rem;">Buka Jam:</label>
                <input type="number" id="admin-open-input" min="0" max="23">
                <label style="font-size:0.8rem;">Tutup Jam:</label>
                <input type="number" id="admin-close-input" min="0" max="23">
                <button class="btn" style="background:var(--secondary)" onclick="updateAdminConfig()">Update Jam</button>
            </div>
            <div style="background:white; padding:20px; border-radius:15px;">
                <h4>Ringkasan</h4>
                <p id="admin-summary-text" style="font-size:0.9rem; margin-top:10px;"></p>
                <button class="btn" style="background:var(--danger)" onclick="clearAdminHistory()">Clear History</button>
            </div>
        </div>

        <div style="background:white; padding:20px; border-radius:20px;">
            <h3>Database Transaksi (History)</h3>
            <div style="overflow-x:auto;">
                <table id="admin-table">
                    <thead><tr><th>User</th><th>WA</th><th>Arena</th><th>Tanggal</th><th>Jam</th><th>Total</th><th>Metode</th></tr></thead>
                    <tbody id="admin-tbody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="contact-screen" class="screen">
        <h2 style="text-align:center;">Hubungi Kami</h2>
        <div style="max-width: 500px; margin: 30px auto; text-align:center; background:white; padding:40px; border-radius:30px; box-shadow: 0 5px 20px rgba(0,0,0,0.05);">
            <a id="wa-link" href="#" target="_blank" style="text-decoration:none;"><button class="btn" style="background: #25D366; margin-bottom:15px;">WhatsApp Admin</button></a>
            <a id="email-link" href="#" style="text-decoration:none;"><button class="btn" style="background: var(--secondary);">Email Support</button></a>
        </div>
    </div>

    <script>
        const WA_NUMBER = "6281234567890";
        const EMAIL_ADDR = "support@prosoccer.id";

        let appData = JSON.parse(localStorage.getItem('ps_final_v4')) || {
            users: [], 
            bookings: [], 
            pricePerHour: 150000,
            venues: ["Arena A (Sintetis)", "Arena B (Sintetis)", "Indoor (Vinyl)"],
            openHour: 8,
            closeHour: 22
        };

        let currentUser = null;
        let selectedSlots = [];
        let tempBooking = null;

        function save() { localStorage.setItem('ps_final_v4', JSON.stringify(appData)); }

        window.onload = () => {
            updateVenueOptions();
            document.getElementById('date-select').valueAsDate = new Date();
            document.getElementById('admin-price-input').value = appData.pricePerHour;
            document.getElementById('admin-open-input').value = appData.openHour;
            document.getElementById('admin-close-input').value = appData.closeHour;
            document.getElementById('wa-link').href = `https://wa.me/${WA_NUMBER}`;
            document.getElementById('email-link').href = `mailto:${EMAIL_ADDR}`;
        };

        function updateVenueOptions() {
            const sel = document.getElementById('field-select'); sel.innerHTML = "";
            appData.venues.forEach(v => {
                const opt = document.createElement('option'); opt.value = v; opt.innerText = v;
                sel.appendChild(opt);
            });
        }

        function generateTimeSlots() {
            const grid = document.getElementById('time-grid');
            const field = document.getElementById('field-select').value;
            const date = document.getElementById('date-select').value;
            grid.innerHTML = ""; selectedSlots = []; updatePriceDisplay();
            
            for(let i = appData.openHour; i <= appData.closeHour; i++) {
                const time = `${i < 10 ? '0'+i : i}:00`;
                const isBooked = appData.bookings.some(b => b.field === field && b.date === date && b.slots.includes(time));
                const div = document.createElement('div');
                div.className = 'time-slot' + (isBooked ? ' booked' : '');
                div.innerText = time;
                if(!isBooked) {
                    div.onclick = () => {
                        if(selectedSlots.includes(time)) { selectedSlots = selectedSlots.filter(s => s !== time); div.classList.remove('selected'); }
                        else { selectedSlots.push(time); div.classList.add('selected'); }
                        updatePriceDisplay();
                    };
                }
                grid.appendChild(div);
            }
        }

        function updatePriceDisplay() {
            document.getElementById('total-price-info').innerText = `Total: Rp ${(selectedSlots.length * appData.pricePerHour).toLocaleString()}`;
        }

        function updateAdminConfig() {
            appData.pricePerHour = parseInt(document.getElementById('admin-price-input').value);
            appData.openHour = parseInt(document.getElementById('admin-open-input').value);
            appData.closeHour = parseInt(document.getElementById('admin-close-input').value);
            const newV = document.getElementById('admin-venue-input').value;
            if(newV) appData.venues.push(newV);
            save(); updateVenueOptions(); alert("Pengaturan Diupdate!");
        }

        function handlePreBooking() {
            if(selectedSlots.length === 0) return alert("Pilih jam!");
            const method = document.getElementById('pay-method').value;
            tempBooking = {
                userEmail: currentUser.email, userName: currentUser.name, userPhone: currentUser.phone || "-",
                field: document.getElementById('field-select').value,
                date: document.getElementById('date-select').value,
                slots: [...selectedSlots], method,
                total: selectedSlots.length * appData.pricePerHour
            };
            document.getElementById('order-summary').innerHTML = `<p>Arena: ${tempBooking.field}</p><p>Jam: ${tempBooking.slots.join(', ')}</p><p>Total: Rp ${tempBooking.total.toLocaleString()}</p>`;
            document.getElementById('qris-area').classList.toggle('hidden', method !== "QRIS");
            document.getElementById('cash-area').classList.toggle('hidden', method !== "Cash");
            document.getElementById('payment-modal').style.display = 'flex';
        }

        function confirmFinalBooking() {
            appData.bookings.push(tempBooking); save();
            document.getElementById('payment-modal').style.display = 'none';
            alert("Berhasil!"); showScreen('home');
        }

        function showMyBookings() {
            showScreen('my-booking');
            const tbody = document.getElementById('my-booking-tbody'); tbody.innerHTML = "";
            appData.bookings.filter(b => b.userEmail === currentUser.email).reverse().forEach(b => {
                const r = tbody.insertRow();
                r.innerHTML = `<td>${b.field}</td><td>${b.date}</td><td>${b.slots.join(', ')}</td><td>Rp ${b.total.toLocaleString()}</td><td>${b.method}</td>`;
            });
        }

        function clearAdminHistory() { if(confirm("Hapus history?")) { appData.bookings = []; save(); renderAdminTable(); } }

        function renderAdminTable() {
            const tbody = document.getElementById('admin-tbody'); tbody.innerHTML = "";
            [...appData.bookings].reverse().forEach(b => {
                const r = tbody.insertRow();
                r.innerHTML = `<td>${b.userName}</td><td>${b.userPhone}</td><td>${b.field}</td><td>${b.date}</td><td>${b.slots.join(', ')}</td><td>Rp ${b.total.toLocaleString()}</td><td>${b.method}</td>`;
            });
            document.getElementById('admin-summary-text').innerText = `Total Transaksi: ${appData.bookings.length}\nTotal Omset: Rp ${appData.bookings.reduce((a,b)=>a+b.total,0).toLocaleString()}`;
        }

        function handleLogin() {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-pass').value;
            const user = appData.users.find(u => u.email === email && u.pass === pass);
            if(user) { currentUser = user; document.getElementById('welcome-msg').innerText = `Halo, ${user.name}!`; showScreen('home'); }
            else alert("Salah!");
        }

        function handleSignup() {
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            const phone = document.getElementById('reg-phone').value;
            const pass = document.getElementById('reg-pass').value;
            appData.users.push({name, email, phone, pass}); save(); alert("Berhasil!"); toggleSignup(false);
        }

        function handleAdminLogin() { if(document.getElementById('admin-pass-input').value === "admin") showScreen('admin'); else alert("Salah!"); }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id + '-screen').classList.add('active');
            document.getElementById('navbar').classList.toggle('hidden', id === 'login');
            if(id === 'admin') renderAdminTable();
        }

        function openBookingScreen() { showScreen('booking'); generateTimeSlots(); }
        function logout() { currentUser = null; showScreen('login'); }
        function switchAuthTab(t) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('user-login-form').classList.add('hidden');
            document.getElementById('user-signup-form').classList.add('hidden');
            document.getElementById('admin-login-form').classList.add('hidden');
            if(t === 'user') { document.getElementById('tab-user').classList.add('active'); document.getElementById('user-login-form').classList.remove('hidden'); }
            else { document.getElementById('tab-admin').classList.add('active'); document.getElementById('admin-login-form').classList.remove('hidden'); }
        }
        function toggleSignup(s) { document.getElementById('user-login-form').classList.toggle('hidden', s); document.getElementById('user-signup-form').classList.toggle('hidden', !s); }
    </script>
</body>
</html>